# Наименование проекта

Десктопное или веб-приложение для учёта финансов по проектам и сотрудникам компании

## Цель проекта

Реализовать десктопное или веб-приложение с использованием реляционной базы данные для учёта финансов по проектам и сотрудникам компании

## Исходная информация

* веб-приложение системы контроля и управления проектами Easy Redmine 2018.1.1 с возможностью использования REST API;
* база данных MySQL 5.7 с данными Easy Redmine;
* созданная реляционная база данных для новых данных.

## Что нужно сделать

Необходимо реализовать десктопное или веб-приложение со своей реляционной базой данных (локальная БД).
Стартовой страницей будет страница с авторизацией пользователя. Необходимо это для отслеживания действий в системе.
После успешной авторизации будет открываться окно с основными функциями (кнопками) данной программы, при нажатии на которые будет открываться соответствующая страница.
Основные функции (кнопки):

* заполнить зарплаты сотрудников;
* заполнить премиальные и иные расходы:
  * заполнить суммы по проектам;
  * заполнить суммы премиальных и др.;
* список проектов;
* отчёт за период по проектам;
* полный отчёт по проектам по годам.

### Кнопка "Заполнить зарплаты сотрудников"

Представляет собой [страницу](https://www.figma.com/design/YWKZth8mPRX7pnUVQqsmtm/Untitled?node-id=1-7).

На странице есть возможность загрузить данные зарплат сотрудников из файла Excel или сделать ввод вручную.  
Формат файла Excel для импорта будет создан позже.  
Для ручного ввода зарплат необходимо:

1. Выбрать месяц и год, за который необходимо заполнить данные.
2. Нажать "Получить список пользователей".
Страница автоматически заполнится списком сотрудников по данным из Redmine (сотрудники с какой-либо активностью в этом месяце). Если у сотрудника в предыдущем месяце есть данные о зарплате, они будут введены изначально.
Можно отредактировать зарплаты сотрудников и ввести для сотрудников, у кого пусто.
3. Нажать кнопку "Сохранить". Данные будут сохранены в локальной БД.

Будет возможность сортировать список сотрудников, возможно добавление фильтров (по группам из Redmine и др.)

Можно сделать экспорт данных в формате Excel.

***Есть вопросы по учитыванию доп. З/П и отпускных, как и где это будем задавать (скорее всего здесь) и учитывать при подсчёте финансов.***

### Кнопка "Заполнить премиальные и иные расходы"

Нажимаем и открывается мини-окно с двумя кнопками:

* заполнить распределение по проектам;
* заполнить премии сотрудников и другие расходы.

### Кнопка "Заполнить распределение по проектам"

Открывается [страница](https://www.figma.com/design/YWKZth8mPRX7pnUVQqsmtm/Untitled?node-id=1-8).

На странице есть таблица для ввода квартальных премий по проектам со столбцами:

* проект - имя проекта;
* сумма - сумма, выделяемая с проекта на квартальные премии;
* ответственное лицо - лицо, которое ответственно за выделение суммы с проекта на квартальные премии [будет выбор сотрудника из выплывающего списка активных сотрудников за выбранный квартал].

Над таблицей будет поле выбора квартала и года. После данных выборов автоматически таблица станет заполнена всеми активными проектами.  
Если же в предыдущем квартале данная таблица была уже заполнена, то суммы и ответственные лица по проектам автоматически заполнятся данными с прошлого квартала.
Внизу таблицы последней строкой будет динамически выводиться сумма всех введённых значений.

Необходимо будет ввести или скорректировать данные в таблице и после нажать на кнопку "Сохранить".  
Данные будут сохранены в локальной БД.

Будет возможность импорта таблицы в файл формата Excel.

### Кнопка "Заполнить премии сотрудников и другие расходы"

Открывается [страница](https://www.figma.com/design/YWKZth8mPRX7pnUVQqsmtm/Untitled?node-id=6-2).

На странице есть таблица для ввода квартальных премий сотрудникам и других статей расходов (мероприятия, корпоратив, чай/кофе и др.) со столбцами:

* статья расхода - ФИО сотрудника или наименование других статей расходов;
* сумма - сумма расхода.

Над таблицей будет поле выбора квартала и года. После данных выборов автоматически таблица заполнится списком активных в этом квартале сотрудников.  
Другие статьи расхода (мероприятия, корпоратив, чай/кофе и др.) либо будут автоматически выведены, либо будет ручной ввод необходимых статей расходов.  
Если же в предыдущем квартале данная таблица была уже заполнена, то суммы по сотрудникам и другим статьям расходов автоматически заполнятся данными с прошлого квартала.  
Внизу таблицы последней строкой будет динамически выводиться сумма всех введённых значений.

Необходимо будет ввести или скорректировать данные в таблице и после нажать на кнопку "Сохранить".  
Данные будут сохранены в локальной БД.

Будет возможность импорта таблицы в файл формата Excel.

***Есть вопрос по учитыванию "Премии 2" (доп. премия), как, что, куда, возможно нужен отдельный столбец в этой таблице под тип премии.***

### Кнопка "Список проектов"

Открывается [страница](https://www.figma.com/design/YWKZth8mPRX7pnUVQqsmtm/Untitled?node-id=1-9) со списком проектов.

На данной странице расположена таблица со списком активных проектов из Redmine и основной информацией по ним.

Есть возможность сортировки и фильтрации списка, добавлять и убирать столбцы в таблице.

При нажатии на проект открывается [карточка проекта](https://www.figma.com/design/YWKZth8mPRX7pnUVQqsmtm/Untitled?node-id=20-23) с основной информацией.

Там будет показана основная информация по проекту по данным из Redmine и другие данные: стартовый бюджет проекта, бюджет проекта на сегодняшнюю дату. Надо подумать что хотелось бы тут видеть, какую информацию.

Ниже будут несколько кнопок, связанных с бюджетом проекта:

* добавить статью расхода - для ввода какой-либо статьи расхода по данному проекту;
* добавить статью дохода - для ввода какой-либо статьи дохода по данному проекту;
* ввести/исправить стартовый бюджет проекта - для первичного ввода или корректировки стартового бюджета проекта.

Введение информации через данные кнопки сохраняется в локальной БД.

### Кнопка "Отчёт за период по проектам"

Открывается [страница](https://www.figma.com/design/YWKZth8mPRX7pnUVQqsmtm/Untitled?node-id=1-10) с информацией в табличном виде, где показываются данные бюджетов проектов и их подпроектов.  
Все значения в данной таблице являются нередактируемыми.

Первые столбцы являются атрибутами "Проектов", например, "Номер проекта", "Проект" и "Наименование в 1С".
Далее идёт столбец под названием "Бюджет", который автоматически вычисляется:
$$StartBudget + AllTotalIncomes,$$
где $StartBudget$ - стартовый бюджет проекта;  
$AllTotalIncomes$ - сумма всех иных статей доходов проекта на текущий момент.

Далее идёт по 5 столбцов на каждый месяц в выбранном временном диапазоне:

* Бюджет на начало мес. - бюджет проекта на начало месяца, который вычисляется автоматически:
$$StartBudget + TotalIncomes - TotalExpenses,$$  
где $StartBudget$ - стартовый бюджет проекта;  
$TotalIncomes$ - сумма всех иных статей доходов проекта на момент начала данного месяца;  
$TotalExpenses$ - сумма всех статей расходов проекта на момент начала данного месяца;
* Расходы на З/П - вычисляется автоматически сумма статей расходов на з/п сотрудников, которые имеют затраченное время на проекте в данном месяце:
  * для сотрудников на полной ставке по формуле: $$\frac{Salary \cdot Hours_{projectMonth}}{Hours_{month}},$$  
  где $Salary$ - номинальная з/п сотрудника (из таблицы со страницы ["Кнопка Заполнить зарплаты сотрудников"](#кнопка-заполнить-зарплаты-сотрудников), где была введена з/п сотрудника за месяц);  
  $Hours_{projectMonth}$ - кол-во отработанных часов сотрудника за данный месяц на проекте;  
  $Hours_{month}$ - кол-во отработанных часов сотрудника за данный месяц;
  * для сотрудников на неполной ставке по формуле: $$\frac{Salary \cdot Hours_{projectMonth}}{NormalHours_{month}},$$  
  где $Salary$ - номинальная з/п сотрудника (из таблицы со страницы ["Кнопка Заполнить зарплаты сотрудников"](#кнопка-заполнить-зарплаты-сотрудников), где была введена з/п сотрудника за месяц);  
  $Hours_{projectMonth}$ - кол-во отработанных часов сотрудника за данный месяц на проекте;  
  $NormalHours_{month}$ - кол-во рабочих часов за данный месяц для 40 ч. рабочей недели согласно производственному календарю;
* Расходы на доп. З/П - если добавим такой тип з/п;
* Расходы на премии 1 - сумма статей расходов на премии (Премии 1) сотрудников в месяце данного проекта;
* Расходы на премии 2 - сумма статей расходов на премии (Премии 2) сотрудников в месяце данного проекта;
* Расходы на отпускные - сумма статей расходов на отпускные сотрудников в месяце данного проекта.

***Возможны другие статьи расхода, которые должны тут быть отражены***

Последними столбцами после всех месяце выбранного временной диапазона будут:

* Остаток бюджета на конец диапазона - остаток средств бюджета проекта на момент конца выбранного временного промежутка:
$$StartBudget + TotalIncomes_{endTimeInterval} - TotalExpenses_{endTimeInterval},$$  
где $StartBudget$ - стартовый бюджет проекта;  
$TotalIncomes_{endTimeInterval}$ - сумма всех иных статей доходов проекта на момент конца выбранного временного промежутка;  
$TotalExpenses_{endTimeInterval}$ - сумма всех статей расходов проекта на момент конца выбранного временного промежутка;
* Расходы в диапазоне - сумма статей расходов за выбранный временной промежуток;
* Итоговый остаток бюджета - остаток средств бюджета проекта на текущий момент:
$$StartBudget + AllTotalIncomes - AllTotalExpenses,$$
где $StartBudget$ - стартовый бюджет проекта;  
$AllTotalIncomes$ - сумма всех иных статей доходов проекта на текущий момент;
$AllTotalExpenses$ - сумма всех статей расходов проекта на текущий момент;
* Итого затраты - сумма всех статей расходов проекта на текущий момент.

В таблице можно через кнопки "Фильтры" и "Сортировка" вверху страницы:

* выбрать рассматриваемый временной промежуток (промежуток по умолчанию - текущий календарный год);
* упорядочить значения списка проектов и отфильтровать список проектов и подпроектов;
* выбрать какие столбцы атрибутов "Проектов" будут показываться в таблице (Номер проекта, Проект, Наименование в 1С и т.п.).

Необходимо обеспечить ширины столбцов по умолчанию такие, чтобы на экране без прокрутки отображались данные по 2-3 месяцам.

В таблице отображаются как отдельные проекты, так и проекты с подпроектами.

Правила для проектов (родительских проектов) с подпроектами:

* первым идёт родительский проект, а сразу после его подпроекты;
* сгруппированы вместе;
* значения столбцов "Стартовый бюджет", "Бюджет на начало месяца", "Расходы на з/п сотрудников" и др. для строки родительского проекта получаются суммированием соответствующих значений строк подпроектов данного родительского проекта.

Внизу справа есть кнопка экспорта данной таблицы в формате Excel.

### Кнопка "Полный отчёт по проектам по годам"

Открывается [страница](https://www.figma.com/design/YWKZth8mPRX7pnUVQqsmtm/Untitled?node-id=1-11) с отчётом расходов по проектам по годам.

На данной странице расположена таблица со списком активных проектов из Redmine и сумм основных расходов проектов на зарплаты, премии и др.

Есть возможность настраивать фильтры проектов, сортировку, отображение столбцов атрибутов проектов и т.п.

Внизу справа есть кнопка экспорта данной таблицы в формате Excel.
