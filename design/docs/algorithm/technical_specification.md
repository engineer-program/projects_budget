# Наименование проекта

Плагин для учёта финансов по проектам и сотрудникам компании

## Цель проекта

Реализовать плагин для Easy Redmine для учёта финансов по проектам и сотрудникам компании

## Исходная информация

* веб-приложение системы контроля и управления проектами Easy Redmine 2018.1.1;
* база данных MySQL 5.7.

## Что нужно сделать

Реализация полноценного финансового плагина. Доступ к основным настройкам и просмотру информации в отдельной вкладке в меню "Прочее" в веб-версии Easy Redmine. Необходимо предусмотреть наличие доступа в зависимости от роли пользователя.
Должно открываться главное окно, где справа сверху будет несколько кнопок, при нажатии на которые будет открываться соответствующее окно:

* заработные платы и премии сотрудников;
* премиальные части проектов;
* сводка финансов;
* статистика.

### Страница "Заработные платы и премии сотрудников"

Представляет собой [страницу](https://www.figma.com/design/InItq3Ywyfz5n2juZiQldq/Finance-projects-Redmine-Plugin?node-id=16-196&m=dev&t=bG8mUnVZt1Aa8s0Z-1) с информацией в табличном виде, где показываются заработные платы и премии по сотрудникам за календарный год. Переключение между разными годами производится при помощи стрелок влево-вправо.
В таблице можно отфильтровать, упорядочить значения (сотрудников) по:

* фамилии;
* имени;
* должности;
* группа.

Справа есть две кнопки:

* Назначить заработную плату;
* Назначить премию сотруднику.

При нажатии на кнопку "Назначить заработную плату" поверх открывается [всплывающее окно](https://www.figma.com/design/InItq3Ywyfz5n2juZiQldq/Finance-projects-Redmine-Plugin?node-id=83-2).
В нём задаётся:

* месяц или диапазон месяцев, на которые хотим задать заработную плату сотруднику - обязательные поля;
* выбор сотрудника из списка активных (незаблокированных) пользователей - обязательное поле;
* в описании можно оставить комментарий - не обязательное поле;
* сумма заработной платы за месяц на руки (оклад + ежемесячная премиальная часть) - обязательное поле.

Можно закрыть данное окно или создать данную запись, которая запишется в БД Redmine (через соответствующие кнопки).

При нажатии на кнопку "Назначить премию сотруднику" поверх открывается [всплывающее окно](https://www.figma.com/design/InItq3Ywyfz5n2juZiQldq/Finance-projects-Redmine-Plugin?node-id=83-89).
В нём задаётся:

* месяц, за который хотим задать заработную плату сотруднику - обязательное поле;
* выбор сотрудника из списка активных (незаблокированных) пользователей - обязательное поле;
* в описании можно оставить комментарий - не обязательное поле;
* сумма премии в этот месяц на руки - обязательное поле.

Можно закрыть данное окно или создать данную запись, которая запишется в БД Redmine (через соответствующие кнопки).

### Страница "Премиальные части проектов"

Представляет собой [страницу](https://www.figma.com/design/InItq3Ywyfz5n2juZiQldq/Finance-projects-Redmine-Plugin?node-id=48-2) с информацией в табличном виде, где показываются в первую очередь бюджет и выделенные части на премии сотрудникам.
В таблице можно отфильтровать, упорядочить значения списка проектов и выбрать период, за который рассматриваются данные финансов.
В настройках можно выбрать какие столбцы будут показываться в таблице (номер проекта, проект, бюджет проекта, выделенные премии сотрудникам и т.п.)
Справа расположены кнопки действий:

* Добавить новый расход на премии;
* Добавить новый доход проекта.

При нажатии на кнопку "Добавить новый расход на премии" поверх открывается [всплывающее окно](https://www.figma.com/design/InItq3Ywyfz5n2juZiQldq/Finance-projects-Redmine-Plugin?node-id=109-2).
В нём задаётся:

* дата выделения статьи расхода на премии - обязательное поле;
* выбор проекта, из бюджета которого вычитаем данный расход - обязательное поле;
* в описании можно оставить комментарий - не обязательное поле;
* выделенная сумма расхода на премии - обязательное поле.

### Страница "Сводка финансов"

В разработке..

### Страница "Статистика"

В разработке..

 $$ПРАВКИ:$$

Добавлять скрины сюда + ссылки.

Стартовая страница - З/П и премии сотрудников.
Будет в виде нередактируемой таблицы з/п и премий сотрудников - реально посчитанные по месяцам данные для тех кто на полной ставке и тех, кто на полставке.
Нажимаем кнопку редактировать и переходим в режим изменения данных заработных плат и премий сотрудников по месяцам за календарный год. Тут открывается данная таблица, но в режиме редактирования.
Список сотрудников в алфавитном порядке по умолчанию.
Нужна возможность фильтрации по группам, по отдельным сотрудникам и т.п.
В таблице можем редактировать значения з/п за месяц вручную. Однако на каждый следующий месяц автоматом переносятся все з/п с предыдущего месяца. Можем редачить значение, нажимаем на значок сохранения рядом и значение сохраняется.
Для тех, кто на неполной ставке, в таблицу вносим значения номинальной з/п при отработке как по полной ставке. А уже в нередактируемой таблице будет показываться именно расчётная з/п сотрудника на неполной ставке с учётом количества отработанных часов: полная з/п (ставка) делим на кол-во рабочих часов и умножаем на реальные часы.
Последний столбец - средний доход за данный период (в зависимости от просматриваемого периода времени).

Справа уже несколько кнопок:

* главная страница
* редактирование зарплат и премий сотрудников

Третья кнопка - проекты (зп и премии).
Открывается нередактируемая таблица на календарный год.
Столбцы - проект, бюджет стартовый, бюджет на данный момент, зп, премия за январь, зп, премия за февраль и т.д.
Нужна фильтрация списка проектов по различным полям.
Столбцы ЗП будут считаться автоматически в зависимости от затраченного времени сотрудника на проекте и его з/п - нельзя редачить.
Справа будет кнопка - редактировать таблицу. Жмём её.
Бюджет на начало задается в таблице или редактируется.
Внизу таблицы считается автоматически суммарные траты на з/п сотрудникам по всем показанным проектам за каждый месяц.

Жмем сохранить и переоткрывается эта таблица нередактируемая. За каждый месяц по три столбца: бюджет на начало месяца, з/п за месяц и премии за месяц, выделенные на сотрудников в каждом проекте. Мы можем смотреть ее и делать выгрузку в xlsx.

Корректировки по людям, у кого банкротство, будем редактировать в Excel и в Redmine никак не учитывать.

ОХР и ОПР пока отложим на попозже.
Статистика по людям по росту зарплаты - таблица человек - год и средняя з/п за год за несколько лет.

Вопрос с визуализацей главного проекта и подсчёта бюджета главного проекта и списаний менеджеров.
